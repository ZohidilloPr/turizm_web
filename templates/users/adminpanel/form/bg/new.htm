{% extends '../../root.htm' %}
{% load static %}
{% block title %}
    BG
{% endblock title %}
{% block name %}
    Yangi 
{% endblock name %}
{% block list %}
    <div id="fotoform">
        <form action="" method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <label for="id_bg_img">Rasm tanlash</label>
            {{ form.bg_img }}
            <input type="submit" value="Add" class="">
        </form>
        <img src="" alt="" class="live_demo">
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <script>
        function previewFile() {
            const preview = document.querySelector('img');
            const file = document.querySelector('input[type=file]').files[0];
            const reader = new FileReader();

            reader.addEventListener("load", () => {
                // convert image file to base64 string
                preview.src = reader.result;
            }, false);

            if (file) {
                reader.readAsDataURL(file);
            }
        }
        $(document).ready(function(){
            $('#id_bg_img').attr('onchange', "previewFile()");
            $('#id_bg_img').css('display', 'none')
        })
    </script>
{% endblock list %}