{% extends '../../root.htm' %}
{% load static %}
{% block title %}
    List
{% endblock title %}
{% block name %}
    Yangi Post
{% endblock name %}
{% block list %}
    <div id="formpost">
        <form action="" method="post" enctype="multipart/form-data">
            {% csrf_token %}
            {{ form }}
            <input type="submit" value="Add" class="btn btn-dark mt-3">
        </form>
        <div class="post-img">
            <img alt="" class="upload_img">
        </div>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <script>
        function LiveImg() {            
            let img = document.querySelector('img')
            let file = document.querySelector('input[type=file]').files[0];
            const reader = new FileReader();
    
            reader.addEventListener('load', () => {
                img.src = reader.result;
            }, false)
            if (file){
                reader.readAsDataURL(file);
            }
        }
        $(document).ready(function(){
            $('input[type=file]').attr('onchange', "LiveImg()");
        })
        const input = document.getElementById("id_uz_name");
        const log = document.getElementById('id_slug');

        input.addEventListener('input', updateValue);

        function updateValue(e) {
            log.value = e.target.value.split(' ').join('-');
        }
    </script>
{% endblock list %}